(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0f258040"],{6918:function(e,t,c){"use strict";c("a396")},"794b":function(e,t,c){"use strict";c.r(t);var a=c("7a23"),l=c("00ef"),n=c.n(l),o={class:"_search-box"},s={key:0},i={class:"pl-2 pl-md-3 pl-lg-4 d-flex align-items-center "},r=Object(a["q"])("首页"),u=Object(a["q"])("搜索"),b={class:"marL mainKey justify-content-start ml-5",style:{"font-size":"15px"}},d={class:"_tab-title mt-2 mt-md-3",style:{}},m={key:0,class:"_goods_item_container"},j={class:"_goods_item container-fluid"},O={class:"row"},v=["onClick"],p=["src"],f={style:{"font-size":"16px"}},g={class:"d-flex flex-column justify-content-center align-items-start py-2 px-0 px-md-1 px-md-1"},h={class:"pl-2 text-truncate font-weight-bold",style:{"font-weight":"bold"}},y={class:"py-1 text-truncate",style:{"font-size":"12px"}},_={class:"ml-0"},w={class:"text-danger font-weight-bold",style:{"font-size":"18px"}},k=Object(a["q"])("  "),x={class:"text-muted"},R=Object(a["n"])("hr",{class:"text-success w-100 py-0 my-0",size:"2",style:{height:"1px"}},null,-1),T={class:"text-muted  px-0 px-md-1 px-lg-2  d-flex justify-content-end ",style:{"font-size":"10px"}},C={class:"py-0"},V={key:0},M={class:"d-block d-sm-none px-3"},S={key:1},L={class:"d-block d-sm-none px-3"},E={key:0},Z={key:0,class:"w-100 text-center mb-3 mt-2"},q={key:1,class:"_goods_item_container"},W={key:0},z={key:1},B=Object(a["n"])("img",{src:n.a,alt:""},null,-1),H=[B];function I(e,t,c,l,n,B){var I=Object(a["V"])("el-breadcrumb-item"),U=Object(a["V"])("el-breadcrumb"),J=Object(a["V"])("el-tab-pane"),N=Object(a["V"])("el-tabs"),G=Object(a["V"])("el-rate"),Q=Object(a["V"])("el-card"),K=Object(a["V"])("el-empty"),$=Object(a["V"])("back-top");return Object(a["M"])(),Object(a["m"])("div",o,[l.appearError?(Object(a["M"])(),Object(a["m"])("div",z,H)):(Object(a["M"])(),Object(a["m"])("div",s,[Object(a["n"])("div",i,[Object(a["r"])(U,{"separator-class":"el-icon-arrow-right"},{default:Object(a["lb"])((function(){return[Object(a["r"])(I,{to:{path:"/"}},{default:Object(a["lb"])((function(){return[r]})),_:1}),Object(a["r"])(I,{onClick:t[0]||(t[0]=function(t){return e.$router.push({path:"/category"})})},{default:Object(a["lb"])((function(){return[u]})),_:1}),Object(a["r"])(I,null,{default:Object(a["lb"])((function(){return[Object(a["q"])(Object(a["Z"])(l.searchText),1)]})),_:1})]})),_:1}),Object(a["n"])("div",b,"关键词:"+Object(a["Z"])(l.keyWord),1)]),Object(a["n"])("div",d,[Object(a["r"])(N,{modelValue:l.activeName,"onUpdate:modelValue":t[1]||(t[1]=function(e){return l.activeName=e}),onTabClick:l.tabClick},{default:Object(a["lb"])((function(){return[Object(a["r"])(J,{label:"销量排序",name:"sales"}),Object(a["r"])(J,{label:"价格排序",name:"price"}),Object(a["r"])(J,{label:"评化排序",name:"comments_count"})]})),_:1},8,["modelValue","onTabClick"])]),e.init_categories?(Object(a["M"])(),Object(a["m"])("div",m,[Object(a["n"])("div",j,[Object(a["n"])("div",O,[(Object(a["M"])(!0),Object(a["m"])(a["b"],null,Object(a["T"])(l.showGoods,(function(e){return Object(a["M"])(),Object(a["m"])("div",{class:"col-6 col-sm-4 col-md-3 col-lg-2",key:e.id,onClick:function(t){return l.itemClick(e.id)}},[Object(a["r"])(Q,{"body-style":{padding:"0px"},class:"my-1  mx-1"},{default:Object(a["lb"])((function(){return[Object(a["n"])("img",{src:e.cover_url,class:"image w-100 img-thumbnail mt-1",style:{"max-width":"95%"}},null,8,p),Object(a["n"])("div",f,[Object(a["n"])("div",g,[Object(a["n"])("span",h,Object(a["Z"])(e.title),1),Object(a["n"])("span",y,Object(a["Z"])(e.updated_at),1),Object(a["n"])("div",_,[Object(a["n"])("span",w,"￥ "+Object(a["Z"])(e.price+".00"),1),k,Object(a["n"])("small",x,[Object(a["n"])("s",null,Object(a["Z"])(e.price-2)+".00",1)])])]),R,Object(a["n"])("div",T,[Object(a["n"])("small",C,[e.comments_count>0?(Object(a["M"])(),Object(a["m"])("span",V,[Object(a["r"])(G,{modelValue:l.myHigherRate,"onUpdate:modelValue":t[2]||(t[2]=function(e){return l.myHigherRate=e}),disabled:"","show-score":"","text-color":"#ff9900",class:"d-none d-sm-block"},null,8,["modelValue"]),Object(a["n"])("span",M,"评分："+Object(a["Z"])(l.myHigherRate),1)])):(Object(a["M"])(),Object(a["m"])("span",S,[Object(a["r"])(G,{modelValue:l.myLowerRate,"onUpdate:modelValue":t[3]||(t[3]=function(e){return l.myLowerRate=e}),disabled:"","show-score":"","text-color":"#ff9900",class:"d-none d-sm-block"},null,8,["modelValue"]),Object(a["n"])("span",L,"评分："+Object(a["Z"])(l.myHigherRate),1)]))])])])]})),_:2},1024)],8,v)})),128)),e.init_goods?Object(a["l"])("",!0):(Object(a["M"])(),Object(a["m"])("div",E,[Object(a["r"])(K,{description:"商品暂无数据"})]))]),e.init_goods?(Object(a["M"])(),Object(a["m"])("div",Z,[l.isTotal?(Object(a["M"])(),Object(a["m"])("span",{key:1,onClick:t[5]||(t[5]=function(){return l.myRefresh&&l.myRefresh.apply(l,arguments)}),class:"add_more"},"已经加载完毕啦！")):(Object(a["M"])(),Object(a["m"])("span",{key:0,onClick:t[4]||(t[4]=function(){return l.myRefresh&&l.myRefresh.apply(l,arguments)}),class:"add_more"},"点击加载更多"))])):Object(a["l"])("",!0)]),e.init_goods?Object(a["mb"])((Object(a["M"])(),Object(a["k"])($,{key:0,onBTop:l.bTop,class:"myloading"},null,8,["onBTop"])),[[a["ib"],l.isShowBackTop]]):Object(a["l"])("",!0)])):(Object(a["M"])(),Object(a["m"])("div",q,[e.init_goods?Object(a["l"])("",!0):(Object(a["M"])(),Object(a["m"])("div",W,[Object(a["r"])(K,{description:"没有查找到相关书箱"})]))]))]))])}var U=c("5530"),J=c("2909"),N=(c("159b"),c("b0c0"),c("2ca0"),c("1157")),G=c.n(N),Q=c("725f"),K=c("b050"),$=c("5a79"),A=c("4995"),D=c("6c02"),F={name:"Category",components:{BackTop:Q["a"]},setup:function(){var e=Object(D["d"])(),t=Object(D["c"])(),c=Object(a["R"])(!1),l=Object(a["Q"])({init_categories:!1,init_goods:!1}),n=Object(a["Q"])({sales:{page:1,list:[]},price:{page:1,list:[]},comments_count:{page:1,list:[]}}),o=Object(a["R"])(!1),s=Object(a["R"])(!1),i=Object(a["R"])(!1),r=Object(a["R"])("sales"),u=Object(a["R"])(4.9),b=Object(a["R"])(3.7),d=Object(a["R"])(""),m=Object(a["R"])([]),j=Object(a["R"])([]),O=Object(a["R"])([]),v=Object(a["R"])([]),p=Object(a["R"])("sales"),f=Object(a["R"])(""),g=Object(a["R"])(!1),h=Object(a["R"])("");Object(a["J"])((function(){var e=$["a"].service({fullscreen:!1,text:"加载页面中。。。",target:"._goods_item_container"});Object(K["a"])().then((function(e){m.value=e.categories,console.log("serch-category-data",e),m.value.length>0?(m.value.forEach((function(e){0!==e.name.length&&(O.value.push(e.name),e.children.forEach((function(e){0!==e.name.length&&j.value.push(e.name)})))})),0!==m.value.length&&(l.init_categories=!0,null!=window.localStorage.getItem("lastSearchWords")&&window.localStorage.getItem("lastSearchWords").length>0?d.value=window.localStorage.getItem("lastSearchWords"):d.value=t.query.SearchText,y())):A["a"].error("请求数据失败！")})).catch((function(e){console.log("serch-category-err",e),A["a"].error("请求数据失败！请重试")})),null!==e&&(e.close(),e=null)}));var y=function(){console.log("search页面中的查询值是",d.value),f.value=d.value,f.value=f.value.toLowerCase();var e=0;h.value="",O.value.forEach((function(t,c){try{var a,l=m.value[c].children?m.value[c].children:[],n=!1,o=[];if(-1!==f.value.indexOf(t.toLowerCase())){if(l.forEach((function(e,t){var a=m.value[c].children[t].id;-1!==f.value.indexOf(e.name.toLowerCase())&&(n=!0,v.value.push(a),0===h.value.length&&(h.value=e.name)),o.push(a)})),!n)(a=v.value).push.apply(a,o),0===e&&(h.value=t),e++}else l.forEach((function(e,t){var a=m.value[c].children[t].id;-1!==f.value.indexOf(e.name.toLowerCase())&&(v.value.push(a),0===h.value.length&&(h.value=e.name.toLowerCase()))}))}catch(s){console.log("出现异常，已经终止搜索")}})),0!==v.value.length?(l.init_goods=!0,1===n[p.value].page&&(n[p.value].page=0),x()):l.init_goods=!1},_=function(e){i.value=!1,p.value=e.props.name,v.value=[],l.init_goods=!1,g.value=!1,p.value="sales",f.value="",n.sales.page=1,n.sales.list=[],n.price.page=1,n.price.list=[],n.comments_count.page=1,n.comments_count.list=[],o.value=!1,s.value=!1,i.value=!1,y()},w=Object(a["i"])((function(){return 0===n[p.value].list.length?(l.init_goods=!1,[]):(l.init_goods=!0,n[p.value].list)})),k=function(t){e.push({path:"/detail",query:{id:t}})};Object(a["jb"])((function(){return t.query.SearchText}),(function(e){if(void 0!==e){var t=e;!0===t.startsWith("%")&&(t=decodeURIComponent(t)),window.localStorage.setItem("lastSearchWords",t),d.value=t,console.log("路由在变化",e),v.value=[],l.init_goods=!1,g.value=!1,p.value="sales",f.value="",n.sales.page=1,n.sales.list=[],n.price.page=1,n.price.list=[],n.comments_count.page=1,n.comments_count.list=[],o.value=!1,s.value=!1,i.value=!1,y()}})),G()(window).scroll((function(){Math.ceil(G()(document).scrollTop())>=G()(document).height()-G()(window).height()?(s.value=o.value=!0,x()):(s.value=!1,G()(document).scrollTop()<G()(window).height()?o.value=!1:o.value=!0)}));var x=function(){var e=n[p.value].page+1;if(0!==v.value.length&&!1===g.value){var t=null;!0===s.value&&(t=$["a"].service({fullscreen:!1,text:"加载",target:".myloading"}));var c=0,a=v.value.length;v.value.forEach((function(o){Object(K["b"])(p.value,o,e).then((function(e){var t;(t=n[p.value].list).push.apply(t,Object(J["a"])(e.goods.data)),0===e.goods.data.length?(c++,c===a&&(g.value=!0,G()(".add_more").html("已经加载完毕啦！"),G()(".add_more").off("click"),i.value=!0)):l.init_goods=!0})).catch((function(e){console.log("当前请求数据异常"),g.value=!0,G()(".add_more").html("已经加载完毕啦！"),G()(".add_more").off("click"),i.value=!0})),null!==t&&(t.close(),t=null)})),n[p.value].page+=1}else G()(".add_more").html("已经加载完毕啦！"),G()(".add_more").off("click"),i.value=!0},R=function(){G()("body,html").animate({scrollTop:0},200),o.value=s.value=!1},T=function(){i.value||(s.value=o.value=!0,x())};return Object(U["a"])(Object(U["a"])({activeName:r,tabClick:_,goods:n,showGoods:w,BackTop:Q["a"],isShowBackTop:o,bTop:R,itemClick:k,myRefresh:T,appearError:c},Object(a["cb"])(l)),{},{isTotal:i,myHigherRate:u,myLowerRate:b,searchText:d,keyWord:h})}},P=(c("6918"),c("d959")),X=c.n(P);const Y=X()(F,[["render",I]]);t["default"]=Y},a396:function(e,t,c){}}]);
//# sourceMappingURL=chunk-0f258040.8c94e02c.js.map
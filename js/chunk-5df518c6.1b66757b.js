(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5df518c6"],{"2d3f":function(t,e,c){},"4fe8":function(t,e,c){"use strict";var n=c("7a23");Object(n["P"])("data-v-4a03b344");var s=["onClick"],o={class:"_shopMerchant align-self-center d-flex flex-column px-3"},l=Object(n["n"])("div",{class:" d-flex justify-content-start align-items-center pt-1"},[Object(n["n"])("i",{class:"iconfont icon-dianpu ",style:{color:"#52C48F","font-size":"25px"}}),Object(n["n"])("span",{class:"txt-body px-1 ",style:{color:"#B956A8","font-weight":"bold"}},"书小狸书店")],-1),a={class:"_shopBox container-fluid justify-content-start pb-1 d-flex flex-row justify-content-start px-0 mx-0"},d={class:"row w-100 px-2 d-flex justify-content-between"},i={class:"col-4 col-sm-4 col-md-3  d-flex justify-content-start align-items-center px-0 mx-0"},r=["src"],b={class:"_shopMessage col-8 col-sm-8 col-md-9 px-1 d-flex flex-column justify-content-between align-items-start px-0 mx-0"},u={class:"txt-body font-weight-bold py-1 text-truncate"},f={class:"_shopNum txt-subbody d-flex flex-row justify-content-between align-items-center w-100"},j=Object(n["n"])("span",{class:"border border-danger border-lg text-danger px-1 text-truncate"},"标准款式",-1),p={class:" d-flex justify-content-between  w-100 py-1"},O={class:"txt-body d-flex pt-1"},x={class:" text-danger "},m=Object(n["n"])("span",{class:"d-none d-sm-block px-0 px-sm-2 px-md-4 text-danger "},"特惠商品",-1);function y(t,e,c,y,v,g){return Object(n["M"])(!0),Object(n["m"])(n["b"],null,Object(n["T"])(c.allList,(function(e,c){return Object(n["M"])(),Object(n["m"])("div",{class:"_shopItemBox bg-white mt-3 d-flex flex-column",key:c},[Object(n["n"])("div",{class:"_shopItem ",style:{width:"100%",float:"right","border-bottom":"2px solid #F9E8E8"},onClick:function(c){return t.$router.push({path:"/detail",query:{id:e.goods.id}})}},[Object(n["n"])("div",o,[l,Object(n["n"])("div",a,[Object(n["n"])("div",d,[Object(n["n"])("div",i,[Object(n["n"])("img",{src:e.goods.cover_url,alt:"",style:{"max-width":"112px"},class:" align-self-center img-fluid img-thumbnail"},null,8,r)]),Object(n["n"])("div",b,[Object(n["n"])("div",u,Object(n["Z"])(e.goods.title),1),Object(n["n"])("div",f,[j,Object(n["U"])(t.$slots,"numSlot",{item:e},void 0,!0)]),Object(n["n"])("div",p,[Object(n["n"])("div",O,[Object(n["n"])("span",x,"￥"+Object(n["Z"])(e.goods.price),1),m]),Object(n["U"])(t.$slots,"cancelSlot",{id:e.goods.id},void 0,!0)])])])])])],8,s),Object(n["U"])(t.$slots,"bottom",{item:e},void 0,!0)])})),128)}Object(n["N"])();var v=c("6c02"),g=(c("1157"),{name:"GoodsItem",props:{allList:{type:Array,default:function(){return[]}},path:{type:String,default:function(){return"/"}}},setup:function(t,e){Object(v["d"])(),Object(n["R"])(!1)}}),h=(c("c31e"),c("d959")),w=c.n(h);const _=w()(g,[["render",y],["__scopeId","data-v-4a03b344"]]);e["a"]=_},"5a4f":function(t,e,c){"use strict";c.r(e);c("b0c0");var n=c("7a23");Object(n["P"])("data-v-aac7e1a2");var s={class:"_shopOrder d-flex justify-content-center align-items-start "},o={id:"_Order-box",class:"_Order-box card card-body px-0 py-1 mx-0 "},l={class:"",style:{position:"absolute",left:"0",top:"0"}},a=Object(n["n"])("i",{class:"iconfont icon-left",style:{"font-size":"22px",color:"#1f1f1f"}},null,-1),d=Object(n["n"])("span",null,"返回",-1),i=[a,d],r={class:"goodsTitle d-flex justify-content-center pt-2"},b={class:"txt-subtitle",style:{"font-weight":"bold",color:"#434B43"}},u={class:"goodsContent"},f={class:"_myNum txt-body px-5  "},j={class:"d-flex justify-content-end align-items-end px-3 py-1 text-muted txt-subbody"},p={class:"px-1"},O=Object(n["q"])(" 总价 "),x=Object(n["n"])("small",null,"￥",-1),m={class:"txt-subbody"},y=Object(n["n"])("small",null,".00,",-1),v=Object(n["n"])("div",{class:"px-1"},[Object(n["q"])(" 优惠 "),Object(n["n"])("small",null,"￥"),Object(n["n"])("span",{class:"txt-subbody"},"2"),Object(n["n"])("small",null,".00,")],-1),g={class:"px-1 text-black ",style:{"font-weight":"bold"}},h=Object(n["q"])(" 实付款 "),w=Object(n["n"])("small",null,"￥",-1),_={class:"txt-subbody"},k=Object(n["n"])("small",null,".00",-1),A={class:"d-flex justify-content-end align-items-center pb-1 px-3"},C=["onClick"],I=["onClick"],Z=["onClick"],D=["onClick"],B=["onClick"],F={class:"payContent d-flex flex-column justify-content-around pt-2 pt-sm-3"},M=Object(n["n"])("div",{class:"align-self-start px-5 txt-subtitle py-2",style:{"font-weight":"bold"}},"订单信息",-1),E={key:0,class:"row d-flex align-items-center py-1"},$=Object(n["n"])("div",{class:"col-4 col-sm-3 col-md-2 d-flex justify-content-start"},[Object(n["n"])("span",{class:"px-3"},"收货信息")],-1),q={class:" col-8 col-sm-9 col-md-10 d-flex flex-column justify-content-start "},P={class:"w-100 px-2  text-truncate d-flex justify-content-start "},S={class:" text-truncate "},T={class:"w-100 px-2  text-truncate d-flex justify-content-start "},L={class:" text-truncate "},z={key:1,class:"row d-flex align-items-center py-1"},N=Object(n["n"])("div",{class:"col-4 col-sm-3 col-md-2 d-flex justify-content-start"},[Object(n["n"])("span",{class:"px-3"},"收货信息")],-1),J={class:"col-8 col-sm-9 col-md-10 d-flex justify-content-start "},U={class:" px-2  text-truncate"},G={class:"row d-flex  align-items-center py-1"},Q=Object(n["n"])("div",{class:"col-4 col-sm-3 col-md-2 d-flex justify-content-start"},[Object(n["n"])("span",{class:"px-3"},"订单编号")],-1),R={class:"col-8 col-sm-9 col-md-10 d-flex justify-content-start  "},V={class:" px-2  text-truncate"},H={class:"row d-flex align-items-center py-1"},K=Object(n["n"])("div",{class:"col-4 col-sm-3 col-md-2 d-flex justify-content-start"},[Object(n["n"])("span",{class:"px-2 px-sm-3"},"支付宝交易号")],-1),W={class:"col-8 col-sm-9 col-md-10 d-flex justify-content-start "},X={class:" px-2 text-truncate"},Y={class:"row d-flex align-items-center py-1"},tt=Object(n["n"])("div",{class:"col-4 col-sm-3 col-md-2 d-flex justify-content-start"},[Object(n["n"])("span",{class:"px-3"},"创建时间")],-1),et={class:"col-8 col-sm-9 col-md-10 d-flex justify-content-start "},ct={class:" px-2  text-truncate"},nt={class:"row d-flex align-items-center py-1"},st=Object(n["n"])("div",{class:"col-4 col-sm-3 col-md-2 d-flex justify-content-start"},[Object(n["n"])("span",{class:"px-3"},"付款时间")],-1),ot={class:"col-8 col-sm-9 col-md-10 d-flex justify-content-start "},lt={class:" px-2  text-truncate"},at={class:"row d-flex align-items-start py-1"},dt=Object(n["n"])("div",{class:"col-4 col-sm-3 col-md-2 d-flex justify-content-start"},[Object(n["n"])("span",{class:"px-3"},"发货时间")],-1),it={class:"col-8 col-sm-9 col-md-10 d-flex justify-content-start  "},rt={class:"  px-2 text-truncate"},bt={class:"row d-flex align-items-center py-1"},ut=Object(n["n"])("div",{class:"col-4 col-sm-3 col-md-2 d-flex justify-content-start"},[Object(n["n"])("span",{class:"px-3"},"成交时间")],-1),ft={class:"col-8 col-sm-9 col-md-10 d-flex justify-content-start "},jt={class:" px-2  text-truncate"},pt={class:"row d-flex  align-items-center py-2 mt-2",style:{"border-top":"1px solid #C7FAF9"}},Ot=Object(n["n"])("i",{class:"iconfont icon-connecthost",style:{"font-size":"22px",color:"#49BEF2"}},null,-1),xt=Object(n["n"])("span",{class:"px-1"},"联系卖家",-1),mt=[Ot,xt],yt=Object(n["n"])("i",{class:"iconfont icon-dianhua1",style:{"font-size":"22px",color:"#49BEF2"}},null,-1),vt=Object(n["n"])("span",{class:"px-1"},"拨打电话",-1),gt=[yt,vt];function ht(t,e,c,a,d,Ot){var xt=Object(n["V"])("goods-item");return Object(n["M"])(),Object(n["m"])("div",s,[Object(n["n"])("div",o,[Object(n["n"])("div",l,[Object(n["n"])("div",{class:"txt-subtitle txt-subtitle-space  px-2 px-sm-3 ",style:{"font-weight":"bold"},onClick:e[0]||(e[0]=function(e){return t.$router.go(-1)})},i)]),Object(n["n"])("div",r,[Object(n["n"])("span",b,Object(n["Z"])(a.statusString)+"订单",1)]),Object(n["n"])("div",u,[Object(n["r"])(xt,{allList:t.detail.orderDetails.data,path:t.$route.fullPath},{numSlot:Object(n["lb"])((function(t){return[Object(n["n"])("span",f,"x"+Object(n["Z"])(t.item.num),1)]})),bottom:Object(n["lb"])((function(c){return[Object(n["n"])("div",j,[Object(n["n"])("div",p,[O,x,Object(n["n"])("span",m,Object(n["Z"])(c.item.goods.price+2),1),y]),v,Object(n["n"])("div",g,[h,w,Object(n["n"])("span",_,Object(n["Z"])(c.item.goods.price),1),k])]),Object(n["n"])("div",A,[1===t.detail.status?(Object(n["M"])(),Object(n["m"])("div",{key:0,class:"txt-subbody btn rounded rounded-pill px-2 py-1 mx-2",onClick:function(t){return a.onPayOrder(c.item.id)},style:{color:"#5D6A68",border:"2px solid #BAF3EA"}},"支付订单 ",8,C)):Object(n["l"])("",!0),2===t.detail.status?(Object(n["M"])(),Object(n["m"])("div",{key:1,class:"txt-subbody btn rounded rounded-pill px-2 py-1 mx-2",onClick:e[1]||(e[1]=function(t){return a.goTo("/connecthost")}),style:{color:"#5D6A68",border:"2px solid #BAF3EA"}},"联系卖家 ")):Object(n["l"])("",!0),3===t.detail.status?(Object(n["M"])(),Object(n["m"])("div",{key:2,class:"txt-subbody btn rounded rounded-pill px-2 py-1 mx-2",onClick:function(t){return a.goTo("/logistics",{id:c.item.id})},style:{color:"#5D6A68",border:"2px solid #BAF3EA"}},"查看物流 ",8,I)):Object(n["l"])("",!0),3===t.detail.status?(Object(n["M"])(),Object(n["m"])("div",{key:3,class:"txt-subbody btn rounded rounded-pill px-2 py-1 mx-2",onClick:function(t){return a.onConfirmAccept(c.item.id)},style:{color:"#5D6A68",border:"2px solid #BAF3EA"}},"确认收货 ",8,Z)):Object(n["l"])("",!0),4===t.detail.status?(Object(n["M"])(),Object(n["m"])("div",{key:4,class:"txt-subbody btn rounded rounded-pill px-2 py-1 mx-2",onClick:function(t){return a.goTo("/connecthost",{id:c.item.id})},style:{color:"#5D6A68",border:"2px solid #BAF3EA"}},"进行评价 ",8,D)):Object(n["l"])("",!0),Object(n["n"])("div",{class:"txt-subbody btn rounded rounded-pill px-2 py-1",onClick:function(t){return a.onAddCart(c.item.goods_id,c.item.num)},style:{color:"#5D6A68",border:"2px solid #BAF3EA"}},"加入购物车 ",8,B)])]})),_:1},8,["allList","path"])]),Object(n["n"])("div",F,[M,t.addressInfo.name.length>0?(Object(n["M"])(),Object(n["m"])("div",E,[$,Object(n["n"])("div",q,[Object(n["n"])("div",P,[Object(n["n"])("span",S,Object(n["Z"])(t.addressInfo.name)+" "+Object(n["Z"])(t.addressInfo.tel)+" "+Object(n["Z"])(t.addressInfo.province)+" "+Object(n["Z"])(t.addressInfo.city)+" "+Object(n["Z"])(t.addressInfo.county),1)]),Object(n["n"])("div",T,[Object(n["n"])("span",L,Object(n["Z"])(t.addressInfo.addressDetail),1)])])])):(Object(n["M"])(),Object(n["m"])("div",z,[N,Object(n["n"])("div",J,[Object(n["n"])("span",U,"购买商品的地址"+Object(n["Z"])(t.detail.address_id),1)])])),Object(n["n"])("div",G,[Q,Object(n["n"])("div",R,[Object(n["n"])("span",V,Object(n["Z"])(t.detail.order_no),1)])]),Object(n["n"])("div",H,[K,Object(n["n"])("div",W,[Object(n["n"])("span",X,Object(n["Z"])(t.detail.trade_no),1)])]),Object(n["n"])("div",Y,[tt,Object(n["n"])("div",et,[Object(n["n"])("span",ct,Object(n["Z"])(t.detail.created_at),1)])]),Object(n["n"])("div",nt,[st,Object(n["n"])("div",ot,[Object(n["n"])("span",lt,Object(n["Z"])(t.detail.pay_time),1)])]),Object(n["n"])("div",at,[dt,Object(n["n"])("div",it,[Object(n["n"])("span",rt,Object(n["Z"])(t.detail.updated_at),1)])]),Object(n["n"])("div",bt,[ut,Object(n["n"])("div",ft,[Object(n["n"])("span",jt,Object(n["Z"])(t.detail.success_at),1)])]),Object(n["n"])("div",pt,[Object(n["n"])("div",{class:"col-6 d-flex justify-content-center align-items-center",onClick:e[2]||(e[2]=function(e){return t.$router.push({path:"/connecthost"})})},mt),Object(n["n"])("div",{class:"col-6  d-flex justify-content-center align-items-center",onClick:e[3]||(e[3]=function(e){return t.$router.push({path:"/usephone"})})},gt)])])])])}Object(n["N"])();var wt=c("5530"),_t=(c("159b"),c("b64b"),c("1157"),c("5a79")),kt=c("4995"),At=c("5a07"),Ct=c("b3d1"),It=c("e05b"),Zt=c("4fe8"),Dt=c("6c02"),Bt=c("5502"),Ft={name:"OrderDetail",components:{GoodsItem:Zt["a"]},setup:function(){var t=Object(Dt["c"])(),e=Object(Dt["d"])(),c=Object(Bt["b"])(),s=Object(n["Q"])({detail:{orderDetails:{data:[]},status:0,address_id:"",order_no:"",trade_no:"",created_at:"",pay_time:"",updated_at:"",success_at:""},addressInfo:{name:"",tel:"",province:"",city:"",county:"",addressDetail:""},showPay:!1,aliyun:"",wechat:""});Object(n["J"])((function(){var t=_t["a"].service({fullscreen:!1,text:"加载页面中。。。",target:"._Order-box"});o(),null!==t&&(t.close(),t=null)}));var o=function(){var e=t.query.id,c=_t["a"].service({fullscreen:!1,text:"加载页面中。。。",target:"._Order-box"});Object(It["c"])(e).then((function(t){s.detail=t,Object.keys(s.detail).forEach((function(t){null===s.detail[t]&&(s.detail[t]="暂无数据")})),void 0===s.detail.success_at&&(s.detail.success_at="暂无数据"),console.log("orderdetail-data",t),l(s.detail.address_id)})).catch((function(t){console.log("orderdetail-err",t),kt["a"].error("获取订单详情失败")})),null!==c&&(c.close(),c=null)},l=function(t){console.log("获取地址的id是",t),Object(Ct["d"])(t).then((function(t){var e=t;console.log("address-data:",t);var c=s.areaList.county_list;for(var n in c)"function"!=typeof c[n]&&c[n]==e.county&&n;s.addressInfo.name=e.name,s.addressInfo.tel=e.phone,s.addressInfo.province=e.province,s.addressInfo.city=e.city,s.addressInfo.county=e.county,s.addressInfo.addressDetail=e.address,console.log("addressinfo:",s.addressInfo),console.log("数据是",s.addressInfo.province,s.addressInfo.city,s.addressInfo.county)})).catch((function(t){kt["a"].error("原地址信息已经被删除，暂时无法精确查询地址！")}))},a=Object(n["i"])((function(){var t=["","未下单","已支付","已发货","已收货","已过期"];return t[s.detail.status]})),d=function(t,e){Object(At["a"])({goods_id:t,num:e}).then((function(t){201!==t.status&&204!==t.status||(kt["a"].success("添加成功"),c.dispatch("updateCart"))})).catch((function(t){console.log("orderdetail-addcart-err",t),kt["a"].success("添加失败")}))},i=function(t,c){e.push({path:t,query:c||{}})},r=function(){kt["a"].warning("暂时不支持在当前页面进行支付定单")},b=function(t){console.log("当前在确认收货",t),Object(It["a"])(t).then((function(t){204===t.status?kt["a"].success("确认收货成功！"):kt["a"].error("确认收货失败！")})).catch((function(t){console.log("confirmAccept-err",t),kt["a"].error("确认收货失败！请重试")}))};return Object(wt["a"])(Object(wt["a"])({},Object(n["cb"])(s)),{},{statusString:a,onAddCart:d,goTo:i,onPayOrder:r,onConfirmAccept:b})}},Mt=(c("6bbf"),c("d959")),Et=c.n(Mt);const $t=Et()(Ft,[["render",ht],["__scopeId","data-v-aac7e1a2"]]);e["default"]=$t},"6bbf":function(t,e,c){"use strict";c("2d3f")},b6d8:function(t,e,c){},c31e:function(t,e,c){"use strict";c("b6d8")},e05b:function(t,e,c){"use strict";c.d(e,"b",(function(){return s})),c.d(e,"f",(function(){return o})),c.d(e,"g",(function(){return l})),c.d(e,"a",(function(){return a})),c.d(e,"e",(function(){return d})),c.d(e,"d",(function(){return i})),c.d(e,"c",(function(){return r}));var n=c("1bab");function s(t){return Object(n["a"])({url:"/api/orders",method:"post",params:t})}function o(t,e){return Object(n["a"])({url:"/api/orders/".concat(t,"/pay"),method:"get",params:e})}function l(t){return Object(n["a"])({url:"/api/orders/".concat(t,"/status")})}function a(t){return Object(n["a"])({url:"/api/orders/".concat(t,"/confirm"),method:"patch"})}function d(){return Object(n["a"])({url:"/api/orders/preview",method:"get"})}function i(t){return Object(n["a"])({url:"/api/orders",method:"get",params:t})}function r(t){return Object(n["a"])({url:"/api/orders/".concat(t),method:"get",params:{include:"user,orderDetails.goods"}})}}}]);
//# sourceMappingURL=chunk-5df518c6.1b66757b.js.map
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7d65aa20"],{a134:function(e,t,c){},bb51:function(e,t,c){"use strict";c.r(t);c("fb6a"),c("b0c0");var l=c("7a23"),n=c("00ef"),a=c.n(n),o={key:0},s={class:"_tab-title",style:{}},i={class:"_category_item container-fluid mb-2 py-0"},b={class:" list-unstyled"},u={class:"  col-3 col-sm-2 col-md-1 "},r={class:"_list-item col-9 col-sm-10 col-md-11 row",style:{}},d={key:0,class:"px-2 py-1 col-6 col-sm-4 col-md-3 col-lg-1 mx-lg-3 text-truncate"},j=["onClick"],O={class:"  col-3 col-sm-2 col-md-1 "},m={class:"_list-item col-9 col-sm-10 col-md-11 row",style:{}},p={key:0,class:"px-2 py-1 col-6 col-sm-4 col-md-3 col-lg-1 mx-lg-3 text-truncate"},g=["onClick"],v={key:0,class:"d-flex justify-content-center align-items-center"},y=Object(l["n"])("i",{class:"iconfont icon-xiala",style:{"font-size":"18px",color:"lightblue"}},null,-1),f=Object(l["n"])("span",{style:{color:"lightblue"}},"下拉显示更多",-1),h=[y,f],x=Object(l["n"])("i",{class:"iconfont icon-shangla1",style:{"font-size":"18px",color:"lightblue"}},null,-1),k=Object(l["n"])("span",{style:{color:"lightblue"}},"上拉隐藏标签",-1),_=[x,k],w={key:0},R={class:"_tab-title",style:{}},M={class:"_goods_item container-fluid"},T={class:"row"},C=["onClick"],V=["src"],Z={style:{"font-size":"16px"}},z={class:"d-flex flex-column justify-content-center align-items-start py-2 px-0 px-md-1 px-md-1"},B={class:"pl-2 text-truncate font-weight-bold",style:{"font-weight":"bold"}},N={class:"py-1 text-truncate",style:{"font-size":"12px"}},G={class:"ml-0"},H={class:"text-danger font-weight-bold",style:{"font-size":"18px"}},P=Object(l["q"])("  "),q={class:"text-muted"},S=Object(l["n"])("hr",{class:"text-success w-100 py-0 my-0",size:"2",style:{height:"1px"}},null,-1),U={class:"text-muted  px-0 px-md-1 px-lg-2  d-flex justify-content-end ",style:{"font-size":"10px"}},A={class:"py-0"},I={key:0},J={class:"d-block d-sm-none px-3"},L={key:1},D={class:"d-block d-sm-none px-3"},E={key:0},Q={key:0,class:"w-100 text-center mb-3 mt-2"},F={key:1},K=Object(l["n"])("img",{src:a.a,alt:""},null,-1),W=[K];function X(e,t,c,n,a,y){var f=Object(l["V"])("el-tab-pane"),x=Object(l["V"])("el-tabs"),k=Object(l["V"])("el-tag"),K=Object(l["V"])("el-empty"),X=Object(l["V"])("el-card"),Y=Object(l["V"])("el-rate"),$=Object(l["V"])("back-top");return n.appearError?(Object(l["M"])(),Object(l["m"])("div",F,W)):(Object(l["M"])(),Object(l["m"])("div",o,[Object(l["n"])("div",s,[Object(l["r"])(x,{modelValue:n.tActiveName,"onUpdate:modelValue":t[0]||(t[0]=function(e){return n.tActiveName=e})},{default:Object(l["lb"])((function(){return[Object(l["r"])(f,{label:"商品分类",name:"category"})]})),_:1},8,["modelValue"])]),Object(l["n"])("div",i,[Object(l["r"])(X,{class:"box-card py-0"},{default:Object(l["lb"])((function(){return[Object(l["n"])("ul",b,[(Object(l["M"])(!0),Object(l["m"])(l["b"],null,Object(l["T"])(n.categories.slice(0,n.myCount),(function(e){return Object(l["M"])(),Object(l["m"])("li",{class:"d-flex d-md-none  py-2 row ",key:e.id},[Object(l["n"])("div",u,[Object(l["r"])(k,{type:"danger",style:{"font-size":"18px","margin-left":"5px"}},{default:Object(l["lb"])((function(){return[Object(l["q"])(Object(l["Z"])(e.name),1)]})),_:2},1024)]),Object(l["n"])("div",r,[e.children.length?Object(l["l"])("",!0):(Object(l["M"])(),Object(l["m"])("span",d,"暂无数据")),(Object(l["M"])(!0),Object(l["m"])(l["b"],null,Object(l["T"])(e.children,(function(e){return Object(l["M"])(),Object(l["m"])("div",{class:"my-1 col-6 col-sm-4 col-md-3 col-lg-1 mx-lg-3 ",key:e.id,onClick:function(t){return n.getGoods(e.id)}},[Object(l["n"])("span",{class:Object(l["B"])(["px-2 py-2  text-truncate",{active:n.myId==e.id}])},Object(l["Z"])(e.name),3)],8,j)})),128))])])})),128)),(Object(l["M"])(!0),Object(l["m"])(l["b"],null,Object(l["T"])(n.categories.slice(0,n.myCount2),(function(e){return Object(l["M"])(),Object(l["m"])("li",{class:"d-none d-md-flex  py-2 row ",key:e.id},[Object(l["n"])("div",O,[Object(l["r"])(k,{type:"danger",style:{"font-size":"18px","margin-left":"5px"}},{default:Object(l["lb"])((function(){return[Object(l["q"])(Object(l["Z"])(e.name),1)]})),_:2},1024)]),Object(l["n"])("div",m,[e.children.length?Object(l["l"])("",!0):(Object(l["M"])(),Object(l["m"])("span",p,"暂无数据")),(Object(l["M"])(!0),Object(l["m"])(l["b"],null,Object(l["T"])(e.children,(function(e){return Object(l["M"])(),Object(l["m"])("div",{class:"my-1 col-6 col-sm-4 col-md-3 col-lg-1 mx-lg-3 ",key:e.id,onClick:function(t){return n.getGoods(e.id)}},[Object(l["n"])("span",{class:Object(l["B"])(["px-2 py-2  text-truncate",{active:n.myId==e.id}])},Object(l["Z"])(e.name),3)],8,g)})),128))])])})),128)),e.init_categories?(Object(l["M"])(),Object(l["m"])("li",v,[n.isShowDown?(Object(l["M"])(),Object(l["m"])("button",{key:0,onClick:t[1]||(t[1]=function(){return n.changePartTitles&&n.changePartTitles.apply(n,arguments)}),class:"border-0 bg-white"},h)):(Object(l["M"])(),Object(l["m"])("button",{key:1,onClick:t[2]||(t[2]=function(){return n.changePartTitles&&n.changePartTitles.apply(n,arguments)}),class:"border-0 bg-white"},_))])):Object(l["l"])("",!0)]),e.init_categories?Object(l["l"])("",!0):(Object(l["M"])(),Object(l["m"])("div",w,[Object(l["r"])(K,{description:"书籍分类暂无数据,刷新试一试"})]))]})),_:1})]),Object(l["n"])("div",R,[Object(l["r"])(x,{modelValue:n.activeName,"onUpdate:modelValue":t[3]||(t[3]=function(e){return n.activeName=e}),onTabClick:n.tabClick},{default:Object(l["lb"])((function(){return[Object(l["r"])(f,{label:"销量排序",name:"sales"}),Object(l["r"])(f,{label:"价格排序",name:"price"}),Object(l["r"])(f,{label:"评化排序",name:"comments_count"})]})),_:1},8,["modelValue","onTabClick"])]),Object(l["n"])("div",M,[Object(l["n"])("div",T,[(Object(l["M"])(!0),Object(l["m"])(l["b"],null,Object(l["T"])(n.showGoods,(function(e){return Object(l["M"])(),Object(l["m"])("div",{class:"col-6 col-sm-4 col-md-3 col-lg-2",key:e.id,onClick:function(t){return n.itemClick(e.id)}},[Object(l["r"])(X,{"body-style":{padding:"0px"},class:"my-1  mx-1"},{default:Object(l["lb"])((function(){return[Object(l["n"])("img",{src:e.cover_url,class:"image w-100 img-thumbnail mt-1",style:{"max-width":"95%"}},null,8,V),Object(l["n"])("div",Z,[Object(l["n"])("div",z,[Object(l["n"])("span",B,Object(l["Z"])(e.title),1),Object(l["n"])("span",N,Object(l["Z"])(e.updated_at),1),Object(l["n"])("div",G,[Object(l["n"])("span",H,"￥ "+Object(l["Z"])(e.price+".00"),1),P,Object(l["n"])("small",q,[Object(l["n"])("s",null,Object(l["Z"])(e.price-2)+".00",1)])])]),S,Object(l["n"])("div",U,[Object(l["n"])("small",A,[e.comments_count>0?(Object(l["M"])(),Object(l["m"])("span",I,[Object(l["r"])(Y,{modelValue:n.myHigherRate,"onUpdate:modelValue":t[4]||(t[4]=function(e){return n.myHigherRate=e}),disabled:"","show-score":"","text-color":"#ff9900",class:"d-none d-sm-block"},null,8,["modelValue"]),Object(l["n"])("span",J,"评分："+Object(l["Z"])(n.myHigherRate),1)])):(Object(l["M"])(),Object(l["m"])("span",L,[Object(l["r"])(Y,{modelValue:n.myLowerRate,"onUpdate:modelValue":t[5]||(t[5]=function(e){return n.myLowerRate=e}),disabled:"","show-score":"","text-color":"#ff9900",class:"d-none d-sm-block"},null,8,["modelValue"]),Object(l["n"])("span",D,"评分："+Object(l["Z"])(n.myHigherRate),1)]))])])])]})),_:2},1024)],8,C)})),128)),e.init_goods?Object(l["l"])("",!0):(Object(l["M"])(),Object(l["m"])("div",E,[Object(l["r"])(K,{description:"商品暂无数据,刷新试一试"})]))]),e.init_goods?(Object(l["M"])(),Object(l["m"])("div",Q,[n.isTotal?(Object(l["M"])(),Object(l["m"])("span",{key:1,onClick:t[7]||(t[7]=function(){return n.myRefresh&&n.myRefresh.apply(n,arguments)}),class:"add_more"},"已经加载完毕啦！")):(Object(l["M"])(),Object(l["m"])("span",{key:0,onClick:t[6]||(t[6]=function(){return n.myRefresh&&n.myRefresh.apply(n,arguments)}),class:"add_more"},"点击加载更多"))])):Object(l["l"])("",!0)]),e.init_goods?Object(l["mb"])((Object(l["M"])(),Object(l["k"])($,{key:0,onBTop:n.bTop,class:"myloading"},null,8,["onBTop"])),[[l["ib"],n.isShowBackTop]]):Object(l["l"])("",!0)]))}var Y=c("5530"),$=c("2909"),ee=c("1157"),te=c.n(ee),ce=c("725f"),le=c("b050"),ne=c("5a79"),ae=c("4995"),oe=c("6c02"),se={name:"Category",components:{BackTop:ce["a"]},setup:function(){var e=Object(oe["d"])(),t=Object(l["R"])(!1),c=Object(l["Q"])({init_categories:!1,init_goods:!1}),n=Object(l["R"])("sales"),a=Object(l["R"])("category"),o=Object(l["R"])(4.9),s=Object(l["R"])(3.7),i=Object(l["R"])(0),b=Object(l["R"])(2),u=Object(l["R"])(2),r=Object(l["R"])(4),d=Object(l["R"])(4),j=Object(l["R"])([]),O=Object(l["R"])("sales"),m=Object(l["R"])(0),p=Object(l["Q"])({sales:{page:1,list:[]},price:{page:1,list:[]},comments_count:{page:1,list:[]}}),g=Object(l["R"])(!1),v=Object(l["R"])(!1),y=Object(l["R"])(!1),f=Object(l["R"])(!0),h=Object(l["R"])(!1);Object(l["J"])((function(){var e=ne["a"].service({fullscreen:!1,text:"加载页面中。。。",target:"._category_item"});Object(le["a"])().then((function(e){j.value=e.categories,console.log("category-data",e),0!==j.value.length&&(c.init_categories=!0,i.value=j.value[0].children[0].id,j.value.length<b.value&&(b.value=j.value.length,u.value=j.value.length),j.value.length<r.value&&(r.value=j.value.length,d.value=j.value.length))})).catch((function(e){console.log("category-err",e),ae["a"].error("请求数据失败！")})),null!==e&&(e.close(),e=null),Object(le["b"])("sales",m.value).then((function(e){p.sales.list=e.goods.data,0!==p.sales.list.length&&(c.init_goods=!0)}))}));var x=function(e){y.value=!1,O.value=e.props.name,Object(le["b"])(O.value,m.value).then((function(e){p[O.value].list=e.goods.data}))},k=function(e){i.value=e,m.value=e,Object(le["b"])(O.value,m.value).then((function(e){p[O.value].list=e.goods.data}))},_=Object(l["i"])((function(){return 0!==p[O.value].list.length?c.init_goods=!0:c.init_goods=!1,p[O.value].list})),w=function(t){e.push({path:"/detail",query:{id:t}})};te()(window).scroll((function(){Math.ceil(te()(document).scrollTop())>=te()(document).height()-te()(window).height()?(v.value=g.value=!0,R()):(v.value=!1,te()(document).scrollTop()<te()(window).height()?g.value=!1:g.value=!0)}));var R=function(){var e=p[O.value].page+1;if(!1===h.value){var t=null;!0===v.value&&(t=ne["a"].service({fullscreen:!1,text:"加载",target:".myloading"})),Object(le["b"])(O.value,m.value,e).then((function(e){var t;(t=p[O.value].list).push.apply(t,Object($["a"])(e.goods.data)),0===e.goods.data.length&&(h.value=!0,te()(".add_more").html("已经加载完毕啦！"),te()(".add_more").off("click"),y.value=!0)})).catch((function(e){console.log("category-getmore-err",e),h.value=!0,te()(".add_more").html("已经加载完毕啦！"),te()(".add_more").off("click"),y.value=!0})),null!==t&&(t.close(),t=null),p[O.value].page+=1}else te()(".add_more").html("已经加载完毕啦！"),te()(".add_more").off("click"),y.value=!0},M=function(){te()("body,html").animate({scrollTop:0},200),g.value=v.value=!1},T=function(){y.value||(v.value=g.value=!0,R())},C=function(){f.value=!f.value,b.value!==j.value.length?b.value=j.value.length:b.value=u.value,r.value!==j.value.length?r.value=j.value.length:r.value=d.value};return Object(Y["a"])(Object(Y["a"])({categories:j,activeName:n,tActiveName:a,tabClick:x,getGoods:k,goods:p,showGoods:_,BackTop:ce["a"],isShowBackTop:g,bTop:M,itemClick:w,myRefresh:T,appearError:t},Object(l["cb"])(c)),{},{isTotal:y,myHigherRate:o,myLowerRate:s,myId:i,myCount:b,myCount2:r,changePartTitles:C,isShowDown:f})}},ie=(c("c953"),c("d959")),be=c.n(ie);const ue=be()(se,[["render",X]]);t["default"]=ue},c953:function(e,t,c){"use strict";c("a134")}}]);
//# sourceMappingURL=chunk-7d65aa20.3b1553ab.js.map
{"version":3,"sources":["webpack:///./src/views/profile/Login.vue","webpack:///./src/views/profile/Login.vue?077a","webpack:///./src/assets/images/pic/bg-login.png","webpack:///./src/assets/images/pic/loginCode.png","webpack:///./src/views/profile/Login.vue?16fe"],"names":["id","src","alt","class","style","onChangeTab","type","name","placeholder","email","title","required","password","$router","push","onSubmit","value","setup","router","store","userInfo","window","resize","width","addClass","siblings","removeClass","index","then","res","localStorage","setItem","access_token","commit","console","log","password_confirmation","initShopCount","initAddress","initProfile","setTimeout","go","getters","getShopCount","length","dispatch","getAddressId","data","forEach","item","is_default","phone","province","city","county","address","catch","err","getUserNickname","avatar_url","__exports__","render","module","exports"],"mappings":"4NAESA,GAAG,a,EAEJ,eAAqE,OAAhEC,IAAA,IAAsCC,IAAI,GAAGC,MAAM,a,YACnDA,MAAM,8DAA8DC,MAAA,uB,GACjED,MAAM,0B,EAEN,eAGM,OAHDA,MAAM,8CAA8CC,MAAA,wB,CACrD,eAA0E,KAAvED,MAAM,uBAAuBC,MAAA,uCAChC,eAA6E,QAAvED,MAAM,4BAA2B,qC,MAGtCC,MAAA,wB,GACID,MAAM,iDAAiDC,MAAA,uC,EAEpD,eAAiB,YAAX,QAAI,G,GAAV,G,EAGA,eAAiB,YAAX,QAAI,G,GAAV,G,GAGHD,MAAM,0F,GACFA,MAAM,uC,GACFA,MAAM,2FACNC,MAAA,mD,EACD,eAA4C,KAAzCD,MAAM,8BAA4B,S,GAIpCA,MAAM,8FACNC,MAAA,mD,EACD,eAAwC,KAArCD,MAAM,0BAAwB,S,GAIhCA,MAAM,qD,EAEP,eAA6C,QAAvCA,MAAM,uBAAsB,QAAI,G,GAErCA,MAAM,gB,EAKf,eAuBM,OAvBDA,MAAM,6BAA2B,CAClC,eAEM,OAFDA,MAAM,kEAAgE,CACvE,eAAuF,OAAlFF,IAAA,IAAuCC,IAAI,GAAGE,MAAA,wCAGvD,eAGM,OAHDD,MAAM,wFAAsF,CAC7F,eAAkD,QAA5CA,MAAM,oBAAmB,gBAC/B,eAAgC,YAA1B,yBAEV,eAaM,OAbDA,MAAM,0EAAwE,CAC/E,eAGM,OAHDA,MAAM,oDAAkD,CACzD,eAAsE,KAAnEA,MAAM,uBAAuBC,MAAA,oCAChC,eAAoD,QAA9CD,MAAM,+BAA8B,SAE9C,eAGM,OAHDA,MAAM,yDAAuD,CAC9D,eAA+E,KAA5EA,MAAM,gCAAgCC,MAAA,oCACzC,eAAmD,QAA7CD,MAAM,+BAA8B,QAE9C,eAGM,OAHDA,MAAM,oDAAkD,CACzD,eAA0E,KAAvEA,MAAM,2BAA2BC,MAAA,oCACpC,eAAoD,QAA9CD,MAAM,+BAA8B,a,mDA/D1E,eAuEM,MAvEN,EAuEM,CArEF,EACA,eAmEM,MAnEN,EAmEM,CAlEH,eAiEO,MAjEP,EAiEO,CA/DF,EAKA,eAyDM,MAzDN,EAyDM,CAxDF,eAOM,MAPN,EAOM,CANF,eAEM,OAFDA,MAAM,0CAA2C,QAAK,+BAAE,EAAAE,YAAW,M,GAGxE,eAEM,OAFDF,MAAM,kCAAoC,QAAK,+BAAE,EAAAE,YAAW,M,KAIrE,eA+CM,MA/CN,EA+CM,CA9CF,eAqBM,MArBN,EAqBM,CApBF,eAKM,MALN,EAKM,CAHF,E,gBACA,eACkG,SAD3FC,KAAK,OAAOC,KAAK,cAAcP,GAAG,cAAcI,MAAA,qDAChDD,MAAM,2BAA2BK,YAAY,K,qDAAc,EAAAC,MAAK,IAAEC,MAAM,SAASC,SAAA,I,oBAAtB,EAAAF,WAEtE,eAKM,MALN,EAKM,CAHF,E,gBACA,eACqG,SAD9FH,KAAK,WAAWC,KAAK,eAAeP,GAAG,eAAeI,MAAA,qDACtDD,MAAM,4BAA4BK,YAAY,K,qDAAc,EAAAI,SAAQ,IAAEF,MAAM,QAAQC,SAAA,I,oBAAxB,EAAAC,cAEvE,eAGM,MAHN,EAGM,CAFF,eAAoG,QAA9FT,MAAM,8BAA+B,QAAK,+BAAE,EAAAU,QAAQC,KAAI,uBAAsB,aACpF,IAEJ,eAGM,MAHN,EAGM,CAFF,eAC+C,SADxCR,KAAK,SAAW,QAAK,8BAAE,EAAAS,UAAA,EAAAA,SAAA,qBAAUZ,MAAM,qDACvCC,MAAA,uBAA4BY,MAAM,WAGjD,Y,wIAyCL,GACXT,KAAM,QACNU,MAFW,WAGP,IAAMC,EAAS,iBACTC,EAAQ,iBAERC,EAAW,eAAS,CACtBX,MAAO,GACPG,SAAU,KAId,IAAES,QAAQC,QAAO,WACV,IAAED,QAAQE,QAAQ,KAAO,IAAEF,QAAQE,QAAQ,MAC1C,IAAE,0BAA0BC,SAAS,UAAUC,SAAS,OAAOC,YAAY,UAC3E,IAAE,6BAA6BF,SAAS,UAAUC,SAAS,OAAOC,YAAY,cAKtF,IAAMrB,EAAc,SAACsB,GACjB,IAAE,uBAAuBA,EAAM,KAAKH,SAAS,UAAUC,SAAS,OAAOC,YAAY,UACnF,IAAE,0BAA0BC,EAAM,KAAKH,SAAS,UAAUC,SAAS,OAAOC,YAAY,WAIpFX,EAAW,WAGb,eAASK,GAAUQ,MAAK,SAAAC,GACpBR,OAAOS,aAAaC,QAAQ,QAASF,EAAIG,cACzCb,EAAMc,OAAO,cAAa,GAC1BC,QAAQC,IAAI,SACZf,EAASR,SAAW,GACpBQ,EAASgB,sBAAwB,GAEjCC,IACAC,IACAC,IAEAC,YAAW,WACPtB,EAAOuB,IAAI,KACb,SAMJJ,EAAgB,WACwB,IAAtClB,EAAMuB,QAAQC,aAAaC,OAC3BzB,EAAM0B,SAAS,cAEfX,QAAQC,IAAI,cAIdG,EAAc,WACmB,IAA/BnB,EAAMuB,QAAQI,aACd,iBAAiBlB,MAAK,SAAAC,GACM,IAApBA,EAAIkB,KAAKH,OAIbf,EAAIkB,KAAKC,SAAQ,SAAAC,GACTA,EAAKC,aACL/B,EAAMc,OAAO,eAAgBgB,EAAKjD,IAClCmB,EAAMc,OAAO,qBAAqBgB,EAAK1C,MACvCY,EAAMc,OAAO,sBAAsBgB,EAAKE,OACxChC,EAAMc,OAAO,yBAAyBgB,EAAKG,UAC3CjC,EAAMc,OAAO,qBAAqBgB,EAAKI,MACvClC,EAAMc,OAAO,uBAAuBgB,EAAKK,QACzCnC,EAAMc,OAAO,uBAAuBgB,EAAKM,aAX7CrB,QAAQC,IAAI,iBAcjBqB,OAAM,SAAAC,GACLvB,QAAQC,IAAI,qBAAsBsB,MAKtCvB,QAAQC,IAAI,aAAchB,EAAMuB,QAAQI,eAK1CP,EAAc,WAE6B,IAAzCpB,EAAMuB,QAAQgB,gBAAgBd,OAE9B,iBAAUhB,MAAK,SAAAC,GACPA,EAAI7B,KACJmB,EAAMc,OAAO,kBAAmBJ,EAAItB,MACpCY,EAAMc,OAAO,cAAeJ,EAAI8B,YAChCxC,EAAMc,OAAO,eAAgBJ,EAAIpB,WAEtC+C,OAAM,SAAAC,GACLvB,QAAQC,IAAI,oBAAqBsB,MAIrCvB,QAAQC,IAAI,cAIpB,wCAAW,gBAAOf,IAAlB,IAA6BL,WAAUV,kB,iCCvLnD,MAAMuD,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAE1E,gB,uBCTfC,EAAOC,QAAU,IAA0B,6B,uBCA3CD,EAAOC,QAAU,IAA0B,8B,kCCA3C,W","file":"js/chunk-5cd100e9.178f4191.js","sourcesContent":["<template>\r\n    <!--登录页内容-->\r\n    <div id=\"_loginBox\" >\r\n        <!--登录背景-->\r\n        <img src=\"~assets/images/pic/bg-login.png\" alt=\"\" class=\"_bg-login\" >\r\n        <div class=\"_formBox  d-flex justify-content-center  align-items-center\" style=\"max-width:540px;\">\r\n           <div class=\"_formBoxBoard bg-white\" >\r\n               <!--登录表单提示栏-->\r\n                <div class=\"d-block px-3 py-1 d-flex align-items-center\" style=\"background:#D1ECB8  \">\r\n                    <i class=\"iconfont icon-waring\" style=\"color:#DE5649;font-size:18px;\"></i>\r\n                    <span class=\"txt-mini text-muted px-1\">当前gobook网站只是测试版本，请不要输入您的真实个人信息。</span>\r\n                </div>\r\n               <!--登录表单栏-->\r\n                <div style=\"min-height:300px;\">\r\n                    <div class=\"_tab-login d-flex justify-content-around py-3 \" style=\"border-bottom:1px solid #F8E6E4  \">\r\n                        <div class=\"_account-Login txt-body d-inline active\" @click=\"onChangeTab(0)\">\r\n                            <span>帐号登录</span>\r\n                        </div>\r\n                        <div class=\"_scan-Login txt-body d-inline  \"  @click=\"onChangeTab(1)\">\r\n                            <span>扫码登录</span>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"_message-login pb-3 pt-2  d-flex flex-column justify-content-around align-items-center\"  >\r\n                        <div class=\"_account-message-login  w-75 active\">\r\n                            <div class=\"_account my-3 w-100 d-flex justify-content-between align-items-center rounded rounded-lg\"\r\n                                 style=\"background:#EEA7D0;border:1px solid #EEA7D0\">\r\n                                <i class=\"iconfont icon-account px-2\" > </i>\r\n                                <input type=\"text\" name=\"userAccount\" id=\"userAccount\" style=\"width:88%;font-size:18px;text-indent:5px; \"\r\n                                       class=\"py-1 justify-content-end\" placeholder=\"邮箱\" v-model=\"email\" title=\"帐号不能为空\" required/>\r\n                            </div>\r\n                            <div class=\"_password  my-3 w-100 d-flex justify-content-between align-items-center  rounded rounded-lg\"\r\n                                 style=\"background:#EEA7D0;border:1px solid #EEA7D0\">\r\n                                <i class=\"iconfont icon-suo px-2\" > </i>\r\n                                <input type=\"password\" name=\"userPassword\" id=\"userPassword\" style=\"width:88%;font-size:18px;text-indent:5px; \"\r\n                                       class=\"py-1 justify-content-end \" placeholder=\"密码\" v-model=\"password\" title=\"请输入密码\" required/>\r\n                            </div>\r\n                            <div class=\"_tip_message my-1 d-flex justify-content-between \">\r\n                                <span class=\"_goto-register txt-subbody \" @click=\"$router.push({path:'/register'})\">没有帐号，立即注册</span>\r\n                                <span class=\"txt-mini text-muted\">忘记密码</span>\r\n                            </div>\r\n                            <div class=\"_submit my-3\">\r\n                                <input type=\"submit\"  @click=\"onSubmit\" class=\"userSubmit btn text-white rounded rounded-lg w-100\"\r\n                                       style=\"background:#E83525;\" value=\"登录\"/>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"_scan-message-login w-75 \">\r\n                            <div class=\"   my-3 w-100 d-flex justify-content-center align-items-center\">\r\n                                <img src=\"~assets/images/pic/loginCode.png\" alt=\"\" style=\"max-width:150px;opacity:0.5\">\r\n                            </div>\r\n\r\n                            <div class=\"txt-subbody  my-3 w-100 d-flex flex-column justify-content-center align-items-center\">\r\n                                <span class=\"text-danger pb-2\">(当前暂未开放扫码登录)</span>\r\n                                <span>打开GoBook微信小程序 扫描二维码</span>\r\n                            </div>\r\n                            <div class=\"_password  my-3 w-100 d-flex justify-content-center align-items-center\">\r\n                                <div class=\"d-inline text-truncate d-flex align-items-center\">\r\n                                    <i class=\"iconfont icon-shuru1\" style=\"font-size:22px;color:pink\"></i>\r\n                                    <span class=\"txt-subbody text-muted px-1\">免输入</span>\r\n                                </div>\r\n                                <div class=\"d-inline text-truncate d-flex align-items-center px-3\">\r\n                                    <i class=\"iconfont icon-gengkuai_huaban\" style=\"font-size:22px;color:pink\"></i>\r\n                                    <span class=\"txt-subbody text-muted px-1\">更快</span>\r\n                                </div>\r\n                                <div class=\"d-inline text-truncate d-flex align-items-center\">\r\n                                    <i class=\"iconfont icon-genganquan\" style=\"font-size:22px;color:pink\"></i>\r\n                                    <span class=\"txt-subbody text-muted px-1\">更安全</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div> \r\n</template>\r\n<script>\r\n    import $ from 'jquery';\r\n    import {getLogin} from 'network/user';\r\n    import {getAddressList} from 'network/address';\r\n    import {getUser} from 'network/user';\r\n    import {getCategory, getCategoryGoods} from 'network/category';\r\n\r\n    import {ref, reactive, toRefs} from 'vue';\r\n    import {useRouter} from 'vue-router';\r\n    import {useStore} from 'vuex';\r\n\r\n    export default {\r\n        name: \"Login\",\r\n        setup() {\r\n            const router = useRouter();\r\n            const store = useStore();\r\n            // 用户的输入信息\r\n            const userInfo = reactive({\r\n                email: \"\",\r\n                password: ''\r\n            });\r\n\r\n            // 监听窗口的改变\r\n            $(window).resize(function(){\r\n                if($(window).width()>760 && $(window).width()<780){\r\n                    $('._tab-login >div:eq(0)').addClass('active').siblings('div').removeClass('active');\r\n                    $('._message-login>div:eq(0)').addClass('active').siblings('div').removeClass('active');\r\n                }\r\n            });\r\n\r\n            // 切换登录方式：当前只允许邮箱帐号登录\r\n            const onChangeTab = (index) =>{\r\n                $(\"._tab-login >div:eq(\"+index+\")\").addClass('active').siblings('div').removeClass('active');;                       // 只作用于直系子节点\r\n                $('._message-login>div:eq('+index+')').addClass('active').siblings('div').removeClass('active');\r\n            };\r\n\r\n            // 提交表单数据\r\n            const onSubmit = () => {\r\n                // eduwork   123456  12345600@qq.com\r\n                // 将token保存在本地window.localStorage  setItem(key,value)   getItem(key)\r\n                getLogin(userInfo).then(res => {\r\n                    window.localStorage.setItem('token', res.access_token);\r\n                    store.commit('setIsLogin',true);              // 保存登录状态信息\r\n                    console.log('登录成功！');\r\n                    userInfo.password = '';            // 清空数据\r\n                    userInfo.password_confirmation = '';\r\n\r\n                    initShopCount();\r\n                    initAddress();\r\n                    initProfile();\r\n\r\n                    setTimeout(()=>{\r\n                        router.go(-1);       //退回上一个页面\r\n                    },500)\r\n                });\r\n            };\r\n\r\n\r\n            // 初始化数据，设置vuex中的内容\r\n            const initShopCount = () => {\r\n                if (store.getters.getShopCount.length === 0) {   // 商品数量来决定是否重新获取商品数据\r\n                    store.dispatch('updateCart');                   // 分发数据，更新cartCount的值\r\n                } else {\r\n                    console.log('当前已经有商品数量')\r\n                }\r\n            };\r\n            // 初始化数据，设置vuex中的内容\r\n            const initAddress = () => {\r\n                if (store.getters.getAddressId === 0) {\r\n                    getAddressList().then(res => {\r\n                        if (res.data.length === 0) {\r\n                            console.log('暂时无法获取地址数据');\r\n                            return;\r\n                        }\r\n                        res.data.forEach(item => {           // 参数必需符合地址列表格式\r\n                            if (item.is_default) {\r\n                                store.commit('setAddressId', item.id);      // 给vuex提交地址的ID\r\n                                store.commit('setAddressUserName',item.name);\r\n                                store.commit('setAddressUserPhone',item.phone);\r\n                                store.commit('setAddressUserProvince',item.province);\r\n                                store.commit('setAddressUserCity',item.city);\r\n                                store.commit('setAddressUserCounty',item.county);\r\n                                store.commit('setAddressUserDetail',item.address);\r\n                            }\r\n                        });\r\n                    }).catch(err => {\r\n                        console.log('getAddressList-err', err);\r\n                        // ElMessage.error('获取地址数据失败！');\r\n                    });\r\n\r\n                } else {\r\n                    console.log('当前存在默认地址数据', store.getters.getAddressId);\r\n                }\r\n            };\r\n\r\n            // 初始化数据，设置vuex中的内容\r\n            const initProfile = () => {\r\n                //console.log('这是headers', store.getters.getUserNickname, store.getters.getUserNickname.length);\r\n                if (store.getters.getUserNickname.length === 0) {   // 用户的昵称来决定是否重新获取用户数据\r\n\r\n                    getUser().then(res => {\r\n                        if (res.id) {\r\n                            store.commit('setUserNickname', res.name);\r\n                            store.commit('setUserFace', res.avatar_url);\r\n                            store.commit('setUserEmail', res.email);\r\n                        }\r\n                    }).catch(err => {\r\n                        console.log('获取用户信息失败login-err', err);\r\n                        //ElMessage.error('获取用户信息失败，靖刷新页面');\r\n                    });\r\n                } else {\r\n                    console.log('当前已经有默认地址')\r\n                }\r\n            };\r\n\r\n            return {...toRefs(userInfo), onSubmit, onChangeTab};\r\n        },\r\n    }\r\n\r\n</script>\r\n<style scoped lang=\"scss\">\r\n    #_loginBox{\r\n        width:100%;\r\n        min-height:600px;\r\n        height:auto;\r\n        overflow:hidden;\r\n        display:flex;\r\n        justify-content:center;\r\n        align-items:center;\r\n        position:relative;\r\n        ._bg-login{\r\n            width:2600px;\r\n            position:absolute;\r\n            top:0;\r\n            left:50%;\r\n            margin-left:-1300px;\r\n        }\r\n        ._formBox{\r\n            position:absolute;\r\n            margin:auto 200px 0;\r\n            right:0;\r\n            bottom:0;\r\n            top:0;\r\n            ._scan-Login{\r\n                display:block;\r\n            }\r\n            ._formBoxBoard{\r\n                box-shadow:0 0 0  2px pink;\r\n                margin-top:-80px;\r\n            }\r\n            ._tab-login{\r\n                div{\r\n                    color:black;\r\n                }\r\n                div.active{\r\n                    color:red;\r\n                }\r\n            }\r\n            ._tip_message{\r\n                span._goto-register{\r\n                    color:#A35454;\r\n                }\r\n                span:hover{\r\n                    color:red;\r\n                }\r\n            }\r\n            ._message-login{\r\n                position:relative;\r\n                ._account-message-login,._scan-message-login{\r\n                    display:none;\r\n                    top:0;\r\n                }\r\n                div.active{\r\n                    display:block;\r\n                }\r\n                ._account-message-login >div{\r\n                    i.iconfont{\r\n                        color:#A6A2A2;\r\n                        font-size:22px;\r\n                    }\r\n                    input:-webkit-autofill{\r\n                        box-shadow: 0 0 0 100px inset white !important;\r\n                    }\r\n                    input::placeholder{\r\n                        font-size:18px;\r\n                        color:#EBD5D5;\r\n                    }\r\n                    input{\r\n                        border:1px solid #EEA7D0;\r\n                        border-radius:5px;\r\n                        outline:none;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    @media(max-width:760px){\r\n        ._bg-login{\r\n            display:none!important;\r\n        }\r\n        ._formBox{\r\n            left:0!important;\r\n            margin:auto !important;\r\n        }\r\n        ._scan-Login{\r\n            display:none!important;\r\n        }\r\n    }\r\n</style>","import { render } from \"./Login.vue?vue&type=template&id=46d1b736&scoped=true\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\n\nimport \"./Login.vue?vue&type=style&index=0&id=46d1b736&scoped=true&lang=scss\"\n\nimport exportComponent from \"C:\\\\wamp64\\\\www\\\\giteeWarehouse\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-46d1b736\"]])\n\nexport default __exports__","module.exports = __webpack_public_path__ + \"img/bg-login.2f94f8d1.png\";","module.exports = __webpack_public_path__ + \"img/loginCode.bb22d0a9.png\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Login.vue?vue&type=style&index=0&id=46d1b736&scoped=true&lang=scss\""],"sourceRoot":""}
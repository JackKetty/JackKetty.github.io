{"version":3,"sources":["webpack:///./src/views/category/Category.vue","webpack:///./src/views/category/Category.vue?3e63","webpack:///./src/views/category/Category.vue?413f"],"names":["class","style","size","src","alt","appearError","tActiveName","label","name","default","categories","slice","myCount","item","key","id","type","children","length","subItem","getGoods","myId","myCount2","init_categories","isShowDown","changePartTitles","description","activeName","tabClick","showGoods","itemClick","body-style","cover_url","title","updated_at","price","comments_count","myHigherRate","disabled","show-score","text-color","myLowerRate","init_goods","isTotal","myRefresh","bTop","isShowBackTop","components","BackTop","setup","router","init_ok","myCountPre","myCountPre2","currentOrder","currentCid","goods","sales","page","list","isArriveBottom","isTotalMesaage","loadingInstance_init","service","fullscreen","text","target","then","res","value","console","log","catch","err","error","close","data","tab","props","cid","push","path","query","window","scroll","Math","ceil","document","scrollTop","height","getMoreMessage","loadingInstance","html","off","animate","__exports__","render"],"mappings":"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","file":"js/chunk-7d65aa20.3b1553ab.js","sourcesContent":["<template>\r\n    <!--分类页内容-->\r\n    <div v-if=\"!appearError\">\r\n        <!--标题栏标题项-->\r\n        <div class=\"_tab-title\" style=\" \">\r\n            <el-tabs v-model=\"tActiveName\">\r\n                <el-tab-pane label=\"商品分类\" name=\"category\"></el-tab-pane>\r\n            </el-tabs>\r\n        </div>\r\n        <!--类别列表项-->\r\n        <div class=\"_category_item container-fluid mb-2 py-0\" >\r\n            <el-card class=\"box-card py-0\">\r\n                <template v-slot:default>\r\n                    <ul class=\" list-unstyled\">\r\n                        <li  class=\"d-flex d-md-none  py-2 row \" v-for=\"item in categories.slice(0,myCount)\" :key=\"item.id\">\r\n                            <div class=\"  col-3 col-sm-2 col-md-1 \">\r\n                                <el-tag type=\"danger\" style=\"font-size:18px;margin-left:5px;\">{{item.name}}</el-tag>\r\n                            </div>\r\n                            <div class=\"_list-item col-9 col-sm-10 col-md-11 row\" style=\" \" >\r\n                                <span class=\"px-2 py-1 col-6 col-sm-4 col-md-3 col-lg-1 mx-lg-3 text-truncate\" v-if=\"!item.children.length\">暂无数据</span>\r\n                                <div class=\"my-1 col-6 col-sm-4 col-md-3 col-lg-1 mx-lg-3 \" v-for=\"subItem in item.children\" :key=\"subItem.id\"\r\n                                     @click=\"getGoods(subItem.id)\" >\r\n                                    <span class=\"px-2 py-2  text-truncate\" :class=\"{active:myId==subItem.id}\">{{subItem.name}}</span>\r\n                                </div>\r\n                            </div>\r\n                        </li>\r\n                        <li  class=\"d-none d-md-flex  py-2 row \" v-for=\"item in categories.slice(0,myCount2)\" :key=\"item.id\" >\r\n                            <div class=\"  col-3 col-sm-2 col-md-1 \">\r\n                                <el-tag type=\"danger\" style=\"font-size:18px;margin-left:5px;\">{{item.name}}</el-tag>\r\n                            </div>\r\n                            <div class=\"_list-item col-9 col-sm-10 col-md-11 row\" style=\" \" >\r\n                                <span class=\"px-2 py-1 col-6 col-sm-4 col-md-3 col-lg-1 mx-lg-3 text-truncate\" v-if=\"!item.children.length\">暂无数据</span>\r\n                                <div class=\"my-1 col-6 col-sm-4 col-md-3 col-lg-1 mx-lg-3 \" v-for=\"subItem in item.children\" :key=\"subItem.id\"\r\n                                     @click=\"getGoods(subItem.id)\" >\r\n                                    <span class=\"px-2 py-2  text-truncate\" :class=\"{active:myId==subItem.id}\">{{subItem.name}}</span>\r\n                                </div>\r\n                            </div>\r\n                        </li>\r\n                        <li class=\"d-flex justify-content-center align-items-center\" v-if=\"init_categories\">\r\n                            <button @click=\"changePartTitles\" class=\"border-0 bg-white\" v-if=\"isShowDown\">\r\n                                <i class=\"iconfont icon-xiala\" style=\"font-size:18px;color:lightblue;\"></i>\r\n                                <span style=\"color:lightblue;\">下拉显示更多</span>\r\n                            </button>\r\n                            <button @click=\"changePartTitles\" class=\"border-0 bg-white\" v-else >\r\n                                <i class=\"iconfont icon-shangla1\" style=\"font-size:18px;color:lightblue;\"></i>\r\n                                <span style=\"color:lightblue;\">上拉隐藏标签</span>\r\n                            </button>\r\n                        </li>\r\n                    </ul>\r\n                    <div v-if=\"!init_categories\">\r\n                        <el-empty description=\"书籍分类暂无数据,刷新试一试\"></el-empty>\r\n                    </div>\r\n                </template>\r\n            </el-card>\r\n        </div>\r\n        <!--排序栏标题项-->\r\n        <div class=\"_tab-title\" style=\" \">\r\n            <el-tabs v-model=\"activeName\" @tab-click=\"tabClick\">\r\n                <el-tab-pane label=\"销量排序\" name=\"sales\"></el-tab-pane>\r\n                <el-tab-pane label=\"价格排序\" name=\"price\"></el-tab-pane>\r\n                <el-tab-pane label=\"评化排序\" name=\"comments_count\"></el-tab-pane>\r\n            </el-tabs>\r\n        </div>\r\n        <!--排序商品栏-->\r\n        <div class=\"_goods_item container-fluid\">\r\n            <div class=\"row\">\r\n                <div class=\"col-6 col-sm-4 col-md-3 col-lg-2\" v-for=\"item in showGoods\" :key=\"item.id\"\r\n                     @click=\"itemClick(item.id)\">\r\n                    <el-card :body-style=\" { padding: '0px' }\" class=\"my-1  mx-1\">\r\n                        <img :src=\"item.cover_url\" class=\"image w-100 img-thumbnail mt-1\" style=\"max-width:95%;\"/>\r\n                        <div style=\"font-size:16px;\">\r\n                            <div class=\"d-flex flex-column justify-content-center align-items-start py-2 px-0 px-md-1 px-md-1\">\r\n                                <span class=\"pl-2 text-truncate font-weight-bold\" style=\"font-weight:bold;\">{{item.title}}</span>\r\n                                <span class=\"py-1 text-truncate\" style=\"font-size:12px\">{{item.updated_at}}</span>\r\n                                <div class=\"ml-0\">\r\n                                    <span class=\"text-danger font-weight-bold\" style=\"font-size:18px;\">￥&nbsp;{{item.price+'.00'}}</span>&nbsp;\r\n                                    <small class=\"text-muted\"><s>{{item.price-2}}.00</s></small>\r\n                                </div>\r\n                            </div>\r\n                            <hr class=\"text-success w-100 py-0 my-0\" size=\"2\" style=\"height:1px;\">\r\n                            <div class=\"text-muted  px-0 px-md-1 px-lg-2  d-flex justify-content-end \"\r\n                                 style=\"font-size:10px;\">\r\n                                <small class=\"py-0\">\r\n                                    <span v-if=\"item.comments_count>0\">\r\n                                        <el-rate v-model=\"myHigherRate\"\r\n                                                 disabled show-score\r\n                                                 text-color=\"#ff9900\"\r\n                                                 class=\"d-none d-sm-block\"\r\n                                        > </el-rate>\r\n                                        <span class=\"d-block d-sm-none px-3\">评分：{{myHigherRate}}</span>\r\n                                    </span>\r\n                                    <span v-else>\r\n                                        <el-rate   v-model=\"myLowerRate\"\r\n                                                 disabled show-score\r\n                                                 text-color=\"#ff9900\"\r\n                                                   class=\"d-none d-sm-block\"\r\n                                        > </el-rate>\r\n                                        <span class=\"d-block d-sm-none px-3\">评分：{{myHigherRate}}</span>\r\n                                    </span>\r\n                                </small>\r\n                            </div>\r\n                        </div>\r\n                    </el-card>\r\n                </div>\r\n                <div v-if=\"!init_goods\">\r\n                    <el-empty description=\"商品暂无数据,刷新试一试\"></el-empty>\r\n                </div>\r\n            </div>\r\n            <div class=\"w-100 text-center mb-3 mt-2\"  v-if=\"init_goods\">\r\n                <span v-if=\"!isTotal\" @click=\"myRefresh\" class=\"add_more\" >点击加载更多</span>\r\n                <span v-else @click=\"myRefresh\" class=\"add_more\" >已经加载完毕啦！</span>\r\n            </div>\r\n        </div>\r\n        <!--退回顶部-->\r\n        <back-top @bTop=\"bTop\" class=\"myloading\" v-show=\"isShowBackTop\"  v-if=\"init_goods\"></back-top>\r\n    </div>\r\n    <div v-else>\r\n        <img src=\"~assets/images/404error.png\" alt=\"\">\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import $ from 'jquery';\r\n    import BackTop from \"components/common/backtop/BackTop.vue\";\r\n    import {getCategory, getCategoryGoods} from 'network/category';\r\n\r\n    import { ElLoading,ElMessage } from 'element-plus';\r\n    import {ref, reactive,toRefs, onMounted, computed} from 'vue';\r\n    import {useRouter} from 'vue-router';\r\n\r\n    export default {\r\n        name: \"Category\",\r\n        components: {\r\n            BackTop,\r\n        },\r\n        setup() {\r\n            // 获取路由\r\n            const router = useRouter();\r\n            // 初始化检测数据\r\n            const appearError = ref(false);   // 检测页面是否为404\r\n            const init_ok = reactive({\r\n                init_categories:false,          // 初始化数据\r\n                init_goods:false\r\n            });\r\n\r\n            let activeName = ref('sales');\r\n            let tActiveName = ref('category');\r\n            let myHigherRate = ref(4.9);        // 评分  高\r\n            let myLowerRate = ref(3.7);         // 评分  低\r\n            let myId = ref(0);                  // 确认默认的分类项的id\r\n            let myCount = ref(2);               // 用于判断是否有隐藏的下拉箭头\r\n            let myCountPre = ref(2);\r\n            let myCount2 = ref(4);               // 用于判断是否有隐藏的下拉箭头\r\n            let myCountPre2 = ref(4);\r\n\r\n\r\n            let categories = ref([]);        // 列表项数据\r\n            let currentOrder = ref('sales');    //当前的排序条件和分类ID\r\n            let currentCid = ref(0);\r\n\r\n            // 数据模型\r\n            const goods = reactive({                    // 商品数据\r\n                sales: {page: 1, list: []},\r\n                price: {page: 1, list: []},\r\n                comments_count: {page: 1, list: []},\r\n            });\r\n\r\n            // 显示回到顶部按钮\r\n            let isShowBackTop = ref(false);\r\n            let isArriveBottom = ref(false);\r\n            let isTotal = ref(false);\r\n            let isShowDown = ref(true);\r\n            let isTotalMesaage = ref(false);\r\n\r\n            onMounted(() => {\r\n                // 分类数据列表项\r\n                let loadingInstance_init = ElLoading.service({ fullscreen: false,text:'加载页面中。。。',target: '._category_item'});\r\n                getCategory().then(res => {\r\n                    categories.value = res.categories;\r\n                    console.log(\"category-data\",res);\r\n\r\n                    if(categories.value.length !== 0){          // 检测分类数据数据是否为空\r\n                        init_ok.init_categories = true;\r\n                        myId.value = categories.value[0].children[0].id;\r\n                        if(categories.value.length < myCount.value){\r\n                            myCount.value = categories.value.length;      // 防止数据不超过最大数量，默认数量为3\r\n                            myCountPre.value = categories.value.length;\r\n                        }\r\n                        if(categories.value.length < myCount2.value){\r\n                            myCount2.value = categories.value.length;      // 防止数据不超过最大数量，默认数量为3\r\n                            myCountPre2.value = categories.value.length;\r\n                        }\r\n                    }else{\r\n                        /*appearError.value = true;*/\r\n                    }\r\n                }).catch(err=>{\r\n                    console.log(\"category-err\",err);\r\n                    ElMessage.error('请求数据失败！');\r\n                });\r\n\r\n                if(loadingInstance_init!==null){\r\n                    loadingInstance_init.close();                // 页面加载中...\r\n                    loadingInstance_init = null;\r\n                }\r\n                // 初始化数据，默认sales数据\r\n                // init();\r\n                getCategoryGoods('sales', currentCid.value).then(res => {\r\n                    goods.sales.list = res.goods.data;\r\n                    if(goods.sales.list.length !== 0){          // 检测分类数据数据是否为空\r\n                        init_ok.init_goods = true;\r\n                    }\r\n                });\r\n            });\r\n\r\n\r\n            // 排序选项卡，获取排序类型\r\n            const tabClick = (tab) => {         //使用van-tabs 组件，不需要传入参\r\n                isTotal.value = false;\r\n                currentOrder.value = tab.props.name;\r\n                // 事件触发时，改变数据\r\n                getCategoryGoods(currentOrder.value, currentCid.value).then(res => {\r\n                    goods[currentOrder.value].list = res.goods.data;\r\n                });\r\n            };\r\n\r\n            // 获取分类商品的id\r\n            const getGoods = (cid) => {\r\n                myId.value = cid;\r\n                currentCid.value = cid;\r\n                // 获取新的数据，但建议使用单独的数据\r\n                // init();\r\n                getCategoryGoods(currentOrder.value, currentCid.value).then(res => {\r\n                    goods[currentOrder.value].list = res.goods.data;\r\n                });\r\n            };\r\n\r\n            // 显示商品\r\n            const showGoods = computed(() => {\r\n                if(goods[currentOrder.value].list.length !== 0){       // 检测商品数据是否为空\r\n                    init_ok.init_goods = true;\r\n                }else{\r\n                    init_ok.init_goods = false;\r\n                }\r\n                return goods[currentOrder.value].list;\r\n            });\r\n\r\n            // 初始数据\r\n            // const init = ()=>{\r\n            //     getCategoryGoods('sales',currentCid.value).then(res=>{\r\n            //         goods.sales.list = res.goods.data;\r\n            //     });\r\n            //     getCategoryGoods('price',currentCid.value).then(res=>{\r\n            //         goods.price.list = res.goods.data;\r\n            //     });\r\n            //     getCategoryGoods('comments_count',currentCid.value).then(res=>{\r\n            //         goods.comments_count.list = res.goods.data;\r\n            //     });\r\n            // };\r\n\r\n            // 点击商品，跳转详情页\r\n            const itemClick = (id) => {\r\n                router.push({path: '/detail', query: {id}})\r\n            };\r\n\r\n            // 监听窗口滚动事件\r\n            $(window).scroll(function () {\r\n                // console.log('滚动中。。。',$(document).scrollTop(), $(document).height() , $(window).height());\r\n                // $(document).height() 是总的文档高度\r\n                // $(window).height() 是视口的高度(与outerHighert相同)\r\n                if (Math.ceil($(document).scrollTop()) >= $(document).height() - $(window).height()) {\r\n                    isArriveBottom.value = isShowBackTop.value = true;\r\n                    getMoreMessage();              // 调用函数\r\n                } else {\r\n                    isArriveBottom.value = false;\r\n                    if ($(document).scrollTop() < $(window).height()) {\r\n                        isShowBackTop.value = false;\r\n                    } else {\r\n                        isShowBackTop.value = true;              // 在滑动超过一定高度的时候，必需显示\r\n                    }\r\n                }\r\n            });\r\n\r\n            // 下拉或点击”加载更多“添加更多数据\r\n            const getMoreMessage = () => {\r\n                // console.log(\"滚动条已经到达底部为\" +$(document).scrollTop());\r\n                /*isArriveBottom.value = isShowBackTop.value = true;*/\r\n                const page = goods[currentOrder.value].page + 1;\r\n\r\n                /*currentCid.value = 0;*/\r\n                // 由于数据全部聚集在cid=0 上，所以相对于其它的分类，数据十分少\r\n                if(isTotalMesaage.value === false) {\r\n                    let loadingInstance = null;\r\n                    if (isArriveBottom.value===true)\r\n                        loadingInstance = ElLoading.service({fullscreen: false, text: '加载', target: '.myloading'});\r\n                    getCategoryGoods(currentOrder.value, currentCid.value, page).then(res => {\r\n                        goods[currentOrder.value].list.push(...res.goods.data);\r\n\r\n                        if (res.goods.data.length === 0) {                            // 数据加载完毕\r\n                            isTotalMesaage.value = true;\r\n                            $('.add_more').html('已经加载完毕啦！');\r\n                            $(\".add_more\").off(\"click\");                     // 解绑点击事件,没效果\r\n                            isTotal.value = true;\r\n                        }\r\n                    }).catch(err => {                // 默认请求数据异常时，中断数据请求\r\n                        console.log('category-getmore-err',err);\r\n                        isTotalMesaage.value = true;            // 数据已经全部加载完毕\r\n                        $('.add_more').html('已经加载完毕啦！');\r\n                        $(\".add_more\").off(\"click\");                     // 解绑点击事件,没效果\r\n                        isTotal.value = true;\r\n                    });\r\n                    if(loadingInstance!==null){\r\n                        loadingInstance.close();\r\n                        loadingInstance=null;\r\n                    }\r\n                    goods[currentOrder.value].page += 1;                        // 如果请求的页面数据出现异常，这里采用跳过的方式\r\n\r\n                }else{\r\n                    $('.add_more').html('已经加载完毕啦！');\r\n                    $(\".add_more\").off(\"click\");                     // 解绑点击事件,没效果\r\n                    isTotal.value = true;\r\n                }\r\n            };\r\n\r\n            // 监听任何一个变量\r\n            // watch(isArriveBottom,(newA,oldA)=>{                     // 对单个值进行监听\r\n            //     // console.log(newA+'-----'+oldA);\r\n            // },{immediate:true});\r\n\r\n            // 退回顶部\r\n            const bTop = () => {\r\n                // 500毫秒内，滚动到顶部\r\n                $('body,html').animate({scrollTop: 0}, 200);//回到顶端\r\n                isShowBackTop.value = isArriveBottom.value = false;\r\n            };\r\n\r\n            // 点击”加载更多“\r\n            const myRefresh = () => {\r\n                if (!isTotal.value){ \r\n                    isArriveBottom.value = isShowBackTop.value = true;\r\n                    getMoreMessage();\r\n                }\r\n            };\r\n\r\n            // 点击打开下拉标题\r\n            const changePartTitles = ()=>{\r\n                isShowDown.value = !isShowDown.value;\r\n                if(myCount.value !==categories.value.length){\r\n                    myCount.value = categories.value.length;\r\n                }else{\r\n                    myCount.value = myCountPre.value;\r\n                }\r\n                if(myCount2.value !==categories.value.length){\r\n                    myCount2.value = categories.value.length;\r\n                }else{\r\n                    myCount2.value = myCountPre2.value;\r\n                }\r\n            };\r\n\r\n            return {  categories, activeName,tActiveName,\r\n                tabClick, getGoods, goods, showGoods, BackTop,\r\n                isShowBackTop, bTop, itemClick, myRefresh,\r\n                appearError,...toRefs(init_ok),isTotal,\r\n                myHigherRate,myLowerRate,myId,myCount,myCount2,changePartTitles,isShowDown}\r\n        }\r\n    }\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n    .el-tag{\r\n        float: left;\r\n    }\r\n    .el-tabs__nav-wrap {\r\n        display: flex;\r\n        justify-content: start;\r\n        padding-left: 30px;\r\n    }\r\n\r\n    .el-tabs__nav {\r\n        max-width: 700px;\r\n        display: flex;\r\n        padding: 0 20px;\r\n        justify-content: space-around;\r\n        align-items: center;\r\n    }\r\n\r\n    ._category_item {\r\n        position:relative;\r\n        .el-empty{\r\n            max-height:120px;\r\n            .el-empty__image svg{\r\n                margin-top:0;\r\n                position: relative;\r\n                max-height:100px;\r\n            }\r\n        }\r\n    }\r\n    ._list-item div span:hover,._list-item div span.active{\r\n        background:red;\r\n        border-radius:20px;\r\n        border:1px solid lime;\r\n        color:white;\r\n    }\r\n    .add_more:hover{\r\n        color:red;\r\n    }\r\n</style>","import { render } from \"./Category.vue?vue&type=template&id=3e006174\"\nimport script from \"./Category.vue?vue&type=script&lang=js\"\nexport * from \"./Category.vue?vue&type=script&lang=js\"\n\nimport \"./Category.vue?vue&type=style&index=0&id=3e006174&lang=scss\"\n\nimport exportComponent from \"C:\\\\wamp64\\\\www\\\\giteeWarehouse\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Category.vue?vue&type=style&index=0&id=3e006174&lang=scss\""],"sourceRoot":""}